
:root{
  --grid: 10px;
  --fg: #111827;
  --muted: #64748b;
  --panel: #ffffff;
  --line: #1f2937;
  --bg: #f8fbff;
}

*{ box-sizing: border-box; }
html, body{ height:100%; }
body{
  margin:0;
  font-family: "Segoe UI", Arial, sans-serif;
  color: var(--fg);
  background: var(--bg);
}

.page{ display:flex; flex-direction:column; height:100%; }
header{ border-bottom:1px solid #cbd5e1; background:#fff; }
.toolbar{
  display:flex; flex-wrap:wrap; align-items:center; gap:8px;
  padding:10px;
}
.toolbar .group{
  display:inline-flex; align-items:center; gap:6px;
  border:1px solid #cbd5e1; padding:4px 6px; border-radius:6px; background:#fff;
}
.toolbar .group input[type="number"], .toolbar .group select{
  border:1px solid #cbd5e1; border-radius:4px; padding:2px 6px; height:28px;
}
.toolbar .hint{ color:#475569; font-size:12px; margin-left:auto; }

.canvas{
  position:relative; flex:1; overflow:auto; min-height:0;
  background-size: calc(var(--grid) * 2) calc(var(--grid) * 2);
}
.grid-bg{
  background-image:
    linear-gradient(to right, #e2e8f0 1px, transparent 1px),
    linear-gradient(to bottom, #e2e8f0 1px, transparent 1px);
  background-size: var(--grid) var(--grid);
}

.connections{ position:absolute; left:0; top:0; width:100%; height:100%; pointer-events:none; }
.connector{ fill:none; stroke: var(--fg); stroke-width:2; pointer-events:stroke; }
.connector[data-kind="control"]{ stroke-dasharray:6 4; }
.connector[data-kind="mechanism"]{ stroke-dasharray:2 4; }
.connector.selected{ stroke:#2563eb; stroke-width:3; }

.function{
  position:absolute; width:220px; height:120px;
  background:var(--panel); border:2px solid var(--line); border-radius:4px;
  box-shadow:0 2px 6px rgba(0,0,0,0.06);
  user-select:none;
}
.function .function-name{
  position:absolute; left:10px; right:10px; top:50%; transform:translateY(-50%);
  text-align:center; font-weight:700; font-size:14px; outline:none;
}
.function .function-number{
  position:absolute; right:10px; bottom:6px; font-size:12px; color:#334155;
}

.handle{
  position:absolute; width:18px; height:18px; border-radius:50%;
  background:#f8fafc; border:2px solid #334155; display:flex; align-items:center; justify-content:center;
  cursor:pointer;
}
.handle .icom{ font-size:10px; font-weight:700; color:#334155; }
.handle.active{ outline:3px solid #93c5fd; }
.handle-left{ left:-10px; top:50%; transform:translateY(-50%); }
.handle-right{ right:-10px; top:50%; transform:translateY(-50%); }
.handle-top{ top:-10px; left:50%; transform:translateX(-50%); }
.handle-bottom{ bottom:-10px; left:50%; transform:translateX(-50%); }

.edge-label{
  position:absolute; min-width:16px; min-height:16px; padding:2px 4px;
  background:#ffffff; border:1px solid #cbd5e1; border-radius:4px; font-size:12px;
  box-shadow:0 1px 2px rgba(0,0,0,0.08);
  user-select:text; cursor:text;
}

.offpage{
  position:absolute; width:56px; height:56px;
}
.offpage .label{
  position:absolute; left:0; right:0; top:50%; transform:translateY(-50%);
  text-align:center; font-size:10px; color:#334155;
}

.stub-knob{
  position:absolute; width:12px; height:12px; border:2px solid #475569; background:#ffffff;
  border-radius:50%; box-shadow:0 1px 2px rgba(0,0,0,0.15); cursor:grab;
}
.stub-knob:active{ cursor:grabbing; }

footer{ border-top:1px solid #cbd5e1; background:#fff; padding:8px 12px; color:#475569; font-size:12px; }
